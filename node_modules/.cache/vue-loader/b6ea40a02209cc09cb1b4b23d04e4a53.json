{"remainingRequest":"/Users/juan/Downloads/estore/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/juan/Downloads/estore/resources/js/vue/components/CartList.vue?vue&type=style&index=0&id=5a52c880&scoped=true&lang=scss","dependencies":[{"path":"/Users/juan/Downloads/estore/resources/js/vue/components/CartList.vue","mtime":1649246500709},{"path":"/Users/juan/Downloads/estore/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/juan/Downloads/estore/node_modules/vue-loader-v16/dist/stylePostLoader.js","mtime":499162500000},{"path":"/Users/juan/Downloads/estore/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/juan/Downloads/estore/node_modules/sass-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/juan/Downloads/estore/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/juan/Downloads/estore/node_modules/vue-loader-v16/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci5jYXJ0LWxpc3R7CiAgICAucXVhbnRpdHktc2VsZWN0b3J7CiAgICAgICAgbWFyZ2luLXJpZ2h0OiAxMHB4OwoKICAgIH0KICAgIC5mYS10cmFzaC1jYW57CiAgICAgICAgY29sb3I6ICM4MDgwODA7CiAgICAgICAgY3Vyc29yOiBwb2ludGVyOwogICAgfQogICAgLnNpbmdsZXsKICAgICAgICBkaXNwbGF5OiBmbGV4OwogICAgICAgIC5jYXJ0LWl0ZW17CiAgICAgICAgICAgIGZsZXg6IDE7CiAgICAgICAgfQogICAgICAgIC5mYS10aW1lc3sKICAgICAgICAgICAgY29sb3I6ICNhZGFkYWU7CiAgICAgICAgfQogICAgfQp9Cg=="},{"version":3,"sources":["/Users/juan/Downloads/estore/resources/js/vue/components/CartList.vue"],"names":[],"mappings":";AAgGA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACN,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACd,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;;IAEtB;IACA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACT,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACd,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACnB;IACA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACH,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;QACb,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YACN,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;QACX;QACA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YACL,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QAClB;IACJ;AACJ","file":"/Users/juan/Downloads/estore/resources/js/vue/components/CartList.vue","sourceRoot":"","sourcesContent":["<template>\n    <component class=\"cart-list\" :is=\"alone ? 'div' : 'tr'\" v-for=\"(product, i) in inCart\" :key=\"`${i}-cart`\" >\n        <template v-if=\"!alone\">\n            <td>\n                <cart-item :product=\"product.product\" :quantity=\"product.quantity\" :alone=\"false\" />\n            </td>\n            <td>\n                {{toMoney(product.product.price)}}\n            </td>\n            <td>\n                <quantity v-model=\"product.quantity\" @update:modelValue=\"(q)=>updateQuantity(product, q)\" />\n                <i class=\"fa-solid fa-times\" @click=\"remove(product)\"></i>\n            </td>\n        </template>\n        <div v-if=\"alone\" class=\"single\">\n            <cart-item :product=\"product.product\" :quantity=\"product.quantity\" :alone=\"true\" />\n            <span><i class=\"fa-solid fa-times\" @click=\"remove(product)\"></i></span>\n        </div>\n    </component>\n</template>\n\n<script>\n\nimport CartItem from \"./CartItem\";\nimport Quantity from \"./Quantity\";\nexport default {\n    name: \"CartList\",\n    components:{CartItem, Quantity, },\n    props:{\n        alone: {\n            type: Boolean,\n            default: false,\n        }\n    },\n    data(){\n        return {\n            loading: true,\n            products: [],\n        };\n    },\n    mounted() {\n        this.getProducts();\n    },\n    methods:{\n        async getProducts() {\n            this.loading = true;\n            await this.axios.get('/v1/products', {\n                headers: {\n                    Accept: 'application/json'\n                }\n            }).then(response => {\n                if (Array.isArray(response.data)) this.products = response.data;\n            }).catch(() => {\n            });\n            this.loading = false;\n        },\n        remove(product){\n            this.$store.commit('addItem', {product_id:product.product.title, quantity: 0});\n        },\n        updateQuantity(product, q){\n            if(q > 0) {\n                this.$store.commit('updateItem', {product_id: product.product.title, quantity: q});\n            }\n        }\n    },\n    computed:{\n        inCart(){\n            let products = [];\n            for (const title in this.$store.state.cart) {\n                /* eslint-disable  no-prototype-builtins */\n                if (this.$store.state.cart.hasOwnProperty(title)) {\n                    const product = this.products.find(p=>p.title === title);\n                    if(product && this.$store.state.cart[title] > 0){\n                        products.push({\n                            product,\n                            quantity: Math.floor(this.$store.state.cart[title]),\n                        });\n                    }\n                }\n            }\n            this.$emit('update', products);\n            return products;\n        },\n        toMoney(){\n            return (data)=>{\n                let val = parseFloat(data);\n                if(isNaN(val))val = 0;\n                else val = Math.round((val + Number.EPSILON) * 100) / 100;\n                return \"$\" + val.toFixed(2);\n            };\n        }\n    }\n}\n</script>\n\n<style scoped lang=\"scss\">\n.cart-list{\n    .quantity-selector{\n        margin-right: 10px;\n\n    }\n    .fa-trash-can{\n        color: #808080;\n        cursor: pointer;\n    }\n    .single{\n        display: flex;\n        .cart-item{\n            flex: 1;\n        }\n        .fa-times{\n            color: #adadae;\n        }\n    }\n}\n</style>\n"]}]}