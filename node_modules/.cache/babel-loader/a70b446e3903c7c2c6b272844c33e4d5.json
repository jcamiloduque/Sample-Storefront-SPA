{"remainingRequest":"/Users/juan/Downloads/estore/node_modules/babel-loader/lib/index.js!/Users/juan/Downloads/estore/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/juan/Downloads/estore/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/juan/Downloads/estore/resources/js/vue/components/CartList.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/juan/Downloads/estore/resources/js/vue/components/CartList.vue","mtime":1649246500709},{"path":"/Users/juan/Downloads/estore/babel.config.js","mtime":1649079486963},{"path":"/Users/juan/Downloads/estore/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/juan/Downloads/estore/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/juan/Downloads/estore/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/juan/Downloads/estore/node_modules/vue-loader-v16/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9qdWFuL0Rvd25sb2Fkcy9lc3RvcmUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maW5kLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm51bWJlci5lcHNpbG9uLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLnRvLWZpeGVkLmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgQ2FydEl0ZW0gZnJvbSAiLi9DYXJ0SXRlbSI7CmltcG9ydCBRdWFudGl0eSBmcm9tICIuL1F1YW50aXR5IjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJDYXJ0TGlzdCIsCiAgY29tcG9uZW50czogewogICAgQ2FydEl0ZW06IENhcnRJdGVtLAogICAgUXVhbnRpdHk6IFF1YW50aXR5CiAgfSwKICBwcm9wczogewogICAgYWxvbmU6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZmFsc2UKICAgIH0KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBsb2FkaW5nOiB0cnVlLAogICAgICBwcm9kdWN0czogW10KICAgIH07CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdGhpcy5nZXRQcm9kdWN0cygpOwogIH0sCiAgbWV0aG9kczogewogICAgZ2V0UHJvZHVjdHM6IGZ1bmN0aW9uIGdldFByb2R1Y3RzKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfdGhpcy5sb2FkaW5nID0gdHJ1ZTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmF4aW9zLmdldCgnL3YxL3Byb2R1Y3RzJywgewogICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICAgICAgQWNjZXB0OiAnYXBwbGljYXRpb24vanNvbicKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkocmVzcG9uc2UuZGF0YSkpIF90aGlzLnByb2R1Y3RzID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uICgpIHt9KTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgX3RoaXMubG9hZGluZyA9IGZhbHNlOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgcmVtb3ZlOiBmdW5jdGlvbiByZW1vdmUocHJvZHVjdCkgewogICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ2FkZEl0ZW0nLCB7CiAgICAgICAgcHJvZHVjdF9pZDogcHJvZHVjdC5wcm9kdWN0LnRpdGxlLAogICAgICAgIHF1YW50aXR5OiAwCiAgICAgIH0pOwogICAgfSwKICAgIHVwZGF0ZVF1YW50aXR5OiBmdW5jdGlvbiB1cGRhdGVRdWFudGl0eShwcm9kdWN0LCBxKSB7CiAgICAgIGlmIChxID4gMCkgewogICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgndXBkYXRlSXRlbScsIHsKICAgICAgICAgIHByb2R1Y3RfaWQ6IHByb2R1Y3QucHJvZHVjdC50aXRsZSwKICAgICAgICAgIHF1YW50aXR5OiBxCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICBpbkNhcnQ6IGZ1bmN0aW9uIGluQ2FydCgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB2YXIgcHJvZHVjdHMgPSBbXTsKCiAgICAgIHZhciBfbG9vcCA9IGZ1bmN0aW9uIF9sb29wKHRpdGxlKSB7CiAgICAgICAgLyogZXNsaW50LWRpc2FibGUgIG5vLXByb3RvdHlwZS1idWlsdGlucyAqLwogICAgICAgIGlmIChfdGhpczIuJHN0b3JlLnN0YXRlLmNhcnQuaGFzT3duUHJvcGVydHkodGl0bGUpKSB7CiAgICAgICAgICB2YXIgcHJvZHVjdCA9IF90aGlzMi5wcm9kdWN0cy5maW5kKGZ1bmN0aW9uIChwKSB7CiAgICAgICAgICAgIHJldHVybiBwLnRpdGxlID09PSB0aXRsZTsKICAgICAgICAgIH0pOwoKICAgICAgICAgIGlmIChwcm9kdWN0ICYmIF90aGlzMi4kc3RvcmUuc3RhdGUuY2FydFt0aXRsZV0gPiAwKSB7CiAgICAgICAgICAgIHByb2R1Y3RzLnB1c2goewogICAgICAgICAgICAgIHByb2R1Y3Q6IHByb2R1Y3QsCiAgICAgICAgICAgICAgcXVhbnRpdHk6IE1hdGguZmxvb3IoX3RoaXMyLiRzdG9yZS5zdGF0ZS5jYXJ0W3RpdGxlXSkKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9OwoKICAgICAgZm9yICh2YXIgdGl0bGUgaW4gdGhpcy4kc3RvcmUuc3RhdGUuY2FydCkgewogICAgICAgIF9sb29wKHRpdGxlKTsKICAgICAgfQoKICAgICAgdGhpcy4kZW1pdCgndXBkYXRlJywgcHJvZHVjdHMpOwogICAgICByZXR1cm4gcHJvZHVjdHM7CiAgICB9LAogICAgdG9Nb25leTogZnVuY3Rpb24gdG9Nb25leSgpIHsKICAgICAgcmV0dXJuIGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgdmFyIHZhbCA9IHBhcnNlRmxvYXQoZGF0YSk7CiAgICAgICAgaWYgKGlzTmFOKHZhbCkpIHZhbCA9IDA7ZWxzZSB2YWwgPSBNYXRoLnJvdW5kKCh2YWwgKyBOdW1iZXIuRVBTSUxPTikgKiAxMDApIC8gMTAwOwogICAgICAgIHJldHVybiAiJCIgKyB2YWwudG9GaXhlZCgyKTsKICAgICAgfTsKICAgIH0KICB9Cn07"},{"version":3,"mappings":"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","names":["CartItem","Quantity","name","components","props","alone","type","Boolean","default","data","loading","products","mounted","getProducts","methods","axios","get","headers","Accept","then","Array","isArray","response","catch","remove","product","$store","commit","product_id","title","quantity","updateQuantity","q","computed","inCart","state","cart","hasOwnProperty","find","p","push","Math","floor","$emit","toMoney","val","parseFloat","isNaN","round","Number","EPSILON","toFixed"],"sourceRoot":"","sources":["/Users/juan/Downloads/estore/resources/js/vue/components/CartList.vue"],"sourcesContent":["<template>\n    <component class=\"cart-list\" :is=\"alone ? 'div' : 'tr'\" v-for=\"(product, i) in inCart\" :key=\"`${i}-cart`\" >\n        <template v-if=\"!alone\">\n            <td>\n                <cart-item :product=\"product.product\" :quantity=\"product.quantity\" :alone=\"false\" />\n            </td>\n            <td>\n                {{toMoney(product.product.price)}}\n            </td>\n            <td>\n                <quantity v-model=\"product.quantity\" @update:modelValue=\"(q)=>updateQuantity(product, q)\" />\n                <i class=\"fa-solid fa-times\" @click=\"remove(product)\"></i>\n            </td>\n        </template>\n        <div v-if=\"alone\" class=\"single\">\n            <cart-item :product=\"product.product\" :quantity=\"product.quantity\" :alone=\"true\" />\n            <span><i class=\"fa-solid fa-times\" @click=\"remove(product)\"></i></span>\n        </div>\n    </component>\n</template>\n\n<script>\n\nimport CartItem from \"./CartItem\";\nimport Quantity from \"./Quantity\";\nexport default {\n    name: \"CartList\",\n    components:{CartItem, Quantity, },\n    props:{\n        alone: {\n            type: Boolean,\n            default: false,\n        }\n    },\n    data(){\n        return {\n            loading: true,\n            products: [],\n        };\n    },\n    mounted() {\n        this.getProducts();\n    },\n    methods:{\n        async getProducts() {\n            this.loading = true;\n            await this.axios.get('/v1/products', {\n                headers: {\n                    Accept: 'application/json'\n                }\n            }).then(response => {\n                if (Array.isArray(response.data)) this.products = response.data;\n            }).catch(() => {\n            });\n            this.loading = false;\n        },\n        remove(product){\n            this.$store.commit('addItem', {product_id:product.product.title, quantity: 0});\n        },\n        updateQuantity(product, q){\n            if(q > 0) {\n                this.$store.commit('updateItem', {product_id: product.product.title, quantity: q});\n            }\n        }\n    },\n    computed:{\n        inCart(){\n            let products = [];\n            for (const title in this.$store.state.cart) {\n                /* eslint-disable  no-prototype-builtins */\n                if (this.$store.state.cart.hasOwnProperty(title)) {\n                    const product = this.products.find(p=>p.title === title);\n                    if(product && this.$store.state.cart[title] > 0){\n                        products.push({\n                            product,\n                            quantity: Math.floor(this.$store.state.cart[title]),\n                        });\n                    }\n                }\n            }\n            this.$emit('update', products);\n            return products;\n        },\n        toMoney(){\n            return (data)=>{\n                let val = parseFloat(data);\n                if(isNaN(val))val = 0;\n                else val = Math.round((val + Number.EPSILON) * 100) / 100;\n                return \"$\" + val.toFixed(2);\n            };\n        }\n    }\n}\n</script>\n\n<style scoped lang=\"scss\">\n.cart-list{\n    .quantity-selector{\n        margin-right: 10px;\n\n    }\n    .fa-trash-can{\n        color: #808080;\n        cursor: pointer;\n    }\n    .single{\n        display: flex;\n        .cart-item{\n            flex: 1;\n        }\n        .fa-times{\n            color: #adadae;\n        }\n    }\n}\n</style>\n"]}]}